<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Quest - Magical Adventure</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Comic Sans MS', 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .game-container {
            max-width: 900px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            position: relative;
        }
        .sound-toggle, .music-toggle {
            position: absolute;
            right: 20px;
            background: white;
            border: 3px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s;
        }
        .sound-toggle { top: 20px; }
        .music-toggle { top: 80px; border-color: #FFD700; display: none; }
        .sound-toggle:hover, .music-toggle:hover { transform: scale(1.1); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .sound-toggle.muted, .music-toggle.muted { background: #f5f5f5; border-color: #ccc; }
        .header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 30px;
            text-align: center;
            color: white;
        }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
        .level-info { display: flex; justify-content: space-around; align-items: center; margin-top: 15px; }
        .level-badge {
            display: inline-block;
            background: rgba(255,255,255,0.3);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1.2em;
            font-weight: bold;
        }
        .stars-collected { font-size: 1.5em; }
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            width: 0%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        .content { padding: 40px; }
        .question-container { display: none; animation: fadeIn 0.5s; }
        .question-container.active { display: block; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .question { font-size: 1.5em; margin-bottom: 30px; color: #333; font-weight: bold; }
        .question-subtitle { font-size: 1em; color: #666; margin-top: 10px; font-weight: normal; }
        .options { display: grid; gap: 15px; }
        .option {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
            font-size: 1.2em;
            text-align: center;
        }
        .option:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
        .option.selected {
            border-color: #4CAF50;
            background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%);
        }
        .image-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }
        .image-option {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        .image-option:hover { transform: scale(1.05); border-color: #667eea; }
        .image-option.selected { border-color: #4CAF50; background: #e8f5e9; }
        .image-placeholder {
            width: 100%;
            height: 120px;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            margin-bottom: 10px;
        }
        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 15px;
        }
        .word-tile {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        .word-tile:hover { transform: scale(1.1); }
        .word-tile.used { opacity: 0.3; cursor: not-allowed; }
        .sentence-builder {
            min-height: 80px;
            border: 3px dashed #ccc;
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            background: white;
            margin-bottom: 20px;
        }
        .speaking-task {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
        }
        .speaking-prompt { font-size: 2em; margin: 20px 0; color: #333; }
        .teacher-buttons { display: flex; gap: 20px; justify-content: center; margin-top: 20px; }
        .teacher-btn {
            padding: 15px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        .teacher-btn.correct {
            background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%);
            color: white;
        }
        .teacher-btn.incorrect {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        .teacher-btn:hover { transform: scale(1.05); }
        .button-container { margin-top: 30px; display: flex; justify-content: space-between; }
        button {
            padding: 15px 40px;
            font-size: 1.2em;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        .btn-next {
            background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%);
            color: white;
        }
        .btn-next:hover { transform: scale(1.05); box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4); }
        .btn-next:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .result-container { display: none; text-align: center; padding: 40px; }
        .result-container.active { display: block; animation: fadeIn 0.5s; }
        .trophy { font-size: 8em; margin: 20px 0; animation: bounce 2s infinite; }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        .result-title { font-size: 2.5em; color: #4CAF50; margin: 20px 0; }
        .result-level { font-size: 2em; color: #667eea; margin: 20px 0; padding: 20px; background: #f5f5f5; border-radius: 15px; }
        .result-description { font-size: 1.2em; color: #666; line-height: 1.6; margin: 20px 0; }
        .stars { font-size: 3em; margin: 20px 0; }
        .intro-screen { text-align: center; padding: 40px; }
        .intro-screen.hidden { display: none; }
        .start-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 60px;
            font-size: 1.5em;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
        }
        .start-button:hover { transform: scale(1.1); box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4); }
        .intro-text { font-size: 1.3em; color: #666; margin: 20px 0; line-height: 1.8; }
        .level-section {
            background: rgba(102, 126, 234, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
        }
        .level-section h3 { color: #667eea; margin-bottom: 10px; }
        .matching-container { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin: 20px 0; }
        .matching-column { display: flex; flex-direction: column; gap: 15px; }
        .match-item {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }
        .match-item:hover { transform: translateX(5px); }
        .match-item.selected { border-color: #FFD700; box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }
        .match-item.matched { background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%); cursor: default; }

        /* Quest styles */
        .quest-screen { display: none; text-align: center; padding: 40px; }
        .quest-screen.active { display: block; animation: fadeIn 0.5s; }
        .story-box {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            padding: 40px;
            border-radius: 20px;
            color: white;
            margin: 20px 0;
            text-align: left;
            position: relative;
            overflow: hidden;
        }
        .story-box::before {
            content: 'üìñ';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 3em;
            opacity: 0.3;
        }
        .story-text { font-size: 1.3em; line-height: 1.8; margin: 20px 0; }
        .character { display: inline-block; font-size: 5em; animation: float 3s ease-in-out infinite; }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        .choice-container { display: grid; gap: 20px; margin: 30px 0; }
        .choice-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 25px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.3em;
            border: 3px solid transparent;
            text-align: left;
        }
        .choice-btn:hover {
            transform: translateX(10px);
            border-color: #FFD700;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .mini-game { background: #f5f5f5; padding: 30px; border-radius: 20px; margin: 20px 0; }
        .treasure-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 30px 0; }
        .treasure-box {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            padding: 40px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 3em;
            border: 3px solid transparent;
        }
        .treasure-box:hover { transform: scale(1.1) rotate(5deg); box-shadow: 0 10px 30px rgba(255, 215, 0, 0.5); }
        .treasure-box.opened { background: #e0e0e0; cursor: default; transform: scale(0.95); }
        .puzzle-grid { display: grid; grid-template-columns: repeat(2, 200px); gap: 15px; justify-content: center; margin: 30px 0; }
        .puzzle-piece {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 2em;
            text-align: center;
            border: 3px solid transparent;
        }
        .puzzle-piece:hover { transform: scale(1.1); }
        .puzzle-piece.correct { background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%); }
        .puzzle-piece.incorrect { background: linear-gradient(135deg, #f44336 0%, #e91e63 100%); animation: shake 0.5s; }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        .dialogue-box {
            background: white;
            border: 3px solid #667eea;
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            position: relative;
            text-align: left;
        }
        .dialogue-box::before {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 50px;
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 20px solid #667eea;
        }
        .npc-name { font-weight: bold; color: #667eea; font-size: 1.2em; margin-bottom: 10px; }
        .npc-text { font-size: 1.1em; line-height: 1.6; color: #333; }
        .reward-notification {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            font-size: 1.3em;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .inventory {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255,255,255,0.3);
            border-radius: 15px;
        }
        .inventory-item { background: white; padding: 15px; border-radius: 10px; font-size: 2em; border: 3px solid #667eea; }
        .quest-part { display: none; }
        .quest-part.active { display: block; }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="sound-toggle" id="soundToggle" onclick="toggleSound()" title="–í–∫–ª/–í—ã–∫–ª –∑–≤—É–∫">üîä</div>
        <div class="music-toggle" id="musicToggle" onclick="toggleMusic()" title="–í–∫–ª/–í—ã–∫–ª –º—É–∑—ã–∫—É">üéµ</div>

        <div class="header">
            <h1>üéÆ English Quest</h1>
            <div class="level-info">
                <div class="level-badge" id="currentLevelBadge">üìç Level 0</div>
                <div class="stars-collected" id="starsDisplay">‚≠ê 0/20</div>
            </div>
        </div>

        <!-- Intro Screen -->
        <div class="intro-screen" id="introScreen">
            <div class="content">
                <div style="font-size: 5em; margin: 20px 0;">üåü</div>
                <h2 style="font-size: 2em; color: #333; margin: 20px 0;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ English Quest!</h2>
                <div class="intro-text">
                    –ü—Ä–∏–≤–µ—Ç! –°–µ–≥–æ–¥–Ω—è –º—ã –æ—Ç–ø—Ä–∞–≤–∏–º—Å—è –≤ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ!<br>
                    –¢–µ–±—è –∂–¥—É—Ç <strong>20 –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π</strong> —Ä–∞–∑–Ω–æ–≥–æ —Ç–∏–ø–∞.<br><br>
                    üîä <strong>–í–∫–ª—é—á–∏ –∑–≤—É–∫ –¥–ª—è –ª—É—á—à–µ–≥–æ –æ–ø—ã—Ç–∞!</strong><br><br>
                    üìù –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–¥–∞–Ω–∏—è –±—É–¥—É—Ç –ø—Ä–æ—Å—Ç—ã–º–∏, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ - —Å–ª–æ–∂–Ω–µ–µ<br>
                    üéØ –ü—Ä–æ—Å—Ç–æ –¥–µ–ª–∞–π –≤—Å—ë, —á—Ç–æ –º–æ–∂–µ—à—å!<br>
                    ‚≠ê –ó–∞ –∫–∞–∂–¥–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ø–æ–ª—É—á–∏—à—å –∑–≤–µ–∑–¥–æ—á–∫—É!
                </div>
                <div class="level-section">
                    <h3>üé™ –ß—Ç–æ —Ç–µ–±—è –∂–¥–µ—Ç:</h3>
                    <p>‚úì –ó–∞–¥–∞–Ω–∏—è —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ –∏ —ç–º–æ–¥–∑–∏</p>
                    <p>‚úì –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∏–≥—Ä—ã —Å–æ —Å–ª–æ–≤–∞–º–∏</p>
                    <p>‚úì –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≥–æ–≤–æ—Ä–∏—Ç—å –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏</p>
                    <p>‚úì –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞—Ö!</p>
                    <p>‚úì <strong>–í–æ–ª—à–µ–±–Ω–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞! üó∫Ô∏è</strong></p>
                </div>
                <button class="start-button" onclick="startTest()">üöÄ –ù–∞—á–∞—Ç—å –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ!</button>
            </div>
        </div>

        <!-- Level 0: 20 Questions -->
        <div id="testContent" style="display: none;">
            <div class="content">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar">0/20</div>
                </div>
                <!-- Q1 -->
                <div class="question-container active" data-question="1">
                    <div class="question">üî§ –ó–∞–¥–∞–Ω–∏–µ 1: –ö–∞–∫–∞—è –±—É–∫–≤–∞ –∏–¥–µ—Ç –ø–æ—Å–ª–µ B?</div>
                    <div class="options">
                        <div class="option" onclick="selectOption(this, 'C')">C</div>
                        <div class="option" onclick="selectOption(this, 'D')">D</div>
                        <div class="option" onclick="selectOption(this, 'A')">A</div>
                        <div class="option" onclick="selectOption(this, 'E')">E</div>
                    </div>
                </div>

                <!-- Q2 -->
                <div class="question-container" data-question="2">
                    <div class="question">üé® –ó–∞–¥–∞–Ω–∏–µ 2: –ù–∞–π–¥–∏ RED (–∫—Ä–∞—Å–Ω—ã–π)</div>
                    <div class="image-options">
                        <div class="image-option" onclick="selectOption(this, 'red')">
                            <div class="image-placeholder" style="background: red;">üéà</div>
                            <div>Red</div>
                        </div>
                        <div class="image-option" onclick="selectOption(this, 'blue')">
                            <div class="image-placeholder" style="background: blue;">üéà</div>
                            <div>Blue</div>
                        </div>
                        <div class="image-option" onclick="selectOption(this, 'green')">
                            <div class="image-placeholder" style="background: green;">üéà</div>
                            <div>Green</div>
                        </div>
                        <div class="image-option" onclick="selectOption(this, 'yellow')">
                            <div class="image-placeholder" style="background: yellow;">üéà</div>
                            <div>Yellow</div>
                        </div>
                    </div>
                </div>

                <!-- Q3 -->
                <div class="question-container" data-question="3">
                    <div class="question">üî¢ –ó–∞–¥–∞–Ω–∏–µ 3: –°–∫–æ–ª—å–∫–æ —è–±–ª–æ–∫ —Ç—ã –≤–∏–¥–∏—à—å?</div>
                    <div style="text-align: center; font-size: 4em; margin: 30px 0;">
                        üçé üçé üçé üçé üçé
                    </div>
                    <div class="options">
                        <div class="option" onclick="selectOption(this, 'FOUR')">FOUR (4)</div>
                        <div class="option" onclick="selectOption(this, 'FIVE')">FIVE (5)</div>
                        <div class="option" onclick="selectOption(this, 'SIX')">SIX (6)</div>
                        <div class="option" onclick="selectOption(this, 'THREE')">THREE (3)</div>
                    </div>
                </div>

                <!-- Q4 -->
                <div class="question-container" data-question="4">
                    <div class="question">üó£Ô∏è –ó–∞–¥–∞–Ω–∏–µ 4: –ì–æ–≤–æ—Ä–µ–Ω–∏–µ</div>
                    <div class="speaking-task">
                        <div class="speaking-prompt">üëã –°–∫–∞–∂–∏: "Hello!"</div>
                        <div style="color: #666; margin: 20px 0;">–†–µ–±–µ–Ω–æ–∫ –¥–æ–ª–∂–µ–Ω —Å–∫–∞–∑–∞—Ç—å —Å–ª–æ–≤–æ –≤—Å–ª—É—Ö</div>
                    </div>
                    <div class="teacher-buttons">
                        <button class="teacher-btn correct" onclick="teacherEvaluate(true)">‚úì –°–∫–∞–∑–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ</button>
                        <button class="teacher-btn incorrect" onclick="teacherEvaluate(false)">‚úó –ù–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å</button>
                    </div>
                </div>

                <!-- Q5 -->
                <div class="question-container" data-question="5">
                    <div class="question">üê± –ó–∞–¥–∞–Ω–∏–µ 5: –ù–∞–π–¥–∏ CAT (–∫–æ—à–∫–∞)</div>
                    <div class="image-options">
                        <div class="image-option" onclick="selectOption(this, 'cat')">
                            <div class="image-placeholder">üê±</div>
                            <div>Cat</div>
                        </div>
                        <div class="image-option" onclick="selectOption(this, 'dog')">
                            <div class="image-placeholder">üêï</div>
                            <div>Dog</div>
                        </div>
                        <div class="image-option" onclick="selectOption(this, 'bird')">
                            <div class="image-placeholder">üê¶</div>
                            <div>Bird</div>
                        </div>
                        <div class="image-option" onclick="selectOption(this, 'fish')">
                            <div class="image-placeholder">üê†</div>
                            <div>Fish</div>
                        </div>
                    </div>
                </div>

                <!-- Q6 -->
                <div class="question-container" data-question="6">
                    <div class="question">üëÇ –ó–∞–¥–∞–Ω–∏–µ 6: –°–æ–µ–¥–∏–Ω–∏ —Å–ª–æ–≤–æ —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π
                        <div class="question-subtitle">–ù–∞–∂–º–∏ –Ω–∞ —Å–ª–æ–≤–æ —Å–ª–µ–≤–∞, –ø–æ—Ç–æ–º –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É —Å–ø—Ä–∞–≤–∞</div>
                    </div>
                    <div class="matching-container">
                        <div class="matching-column">
                            <div class="match-item" onclick="selectMatch(this, 'eyes')">Eyes</div>
                            <div class="match-item" onclick="selectMatch(this, 'nose')">Nose</div>
                            <div class="match-item" onclick="selectMatch(this, 'mouth')">Mouth</div>
                        </div>
                        <div class="matching-column">
                            <div class="match-item" onclick="selectMatch(this, 'eyes')">üëÄ</div>
                            <div class="match-item" onclick="selectMatch(this, 'nose')">üëÉ</div>
                            <div class="match-item" onclick="selectMatch(this, 'mouth')">üëÑ</div>
                        </div>
                    </div>
                </div>

                <!-- Q7 -->
                <div class="question-container" data-question="7">
                    <div class="question">üßÆ –ó–∞–¥–∞–Ω–∏–µ 7: –†–µ—à–∏ –ø—Ä–∏–º–µ—Ä: THREE + TWO = ?</div>
                    <div class="options">
                        <div class="option" onclick="selectOption(this, 'FOUR')">FOUR</div>
                        <div class="option" onclick="selectOption(this, 'FIVE')">FIVE</div>
                        <div class="option" onclick="selectOption(this, 'SIX')">SIX</div>
                        <div class="option" onclick="selectOption(this, 'SEVEN')">SEVEN</div>
                    </div>
                </div>

                <!-- Q8 -->
                <div class="question-container" data-question="8">
                    <div class="question">üë®‚Äçüë©‚Äçüëß –ó–∞–¥–∞–Ω–∏–µ 8: –í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ "Mother"</div>
                    <div class="options">
                        <div class="option" onclick="selectOption(this, '–ú–∞–º–∞')">–ú–∞–º–∞</div>
                        <div class="option" onclick="selectOption(this, '–ü–∞–ø–∞')">–ü–∞–ø–∞</div>
                        <div class="option" onclick="selectOption(this, '–°–µ—Å—Ç—Ä–∞')">–°–µ—Å—Ç—Ä–∞</div>
                        <div class="option" onclick="selectOption(this, '–ë–∞–±—É—à–∫–∞')">–ë–∞–±—É—à–∫–∞</div>
                    </div>
                </div>

                <!-- Q9 -->
                <div class="question-container" data-question="9">
                    <div class="question">üçé –ó–∞–¥–∞–Ω–∏–µ 9: –ß—Ç–æ –∏–∑ —ç—Ç–æ–≥–æ –§–†–£–ö–¢?</div>
                    <div class="image-options">
                        <div class="image-option" onclick="selectOption(this, 'apple')">
                            <div class="image-placeholder">üçé</div>
                            <div>Apple</div>
                        </div>
                        <div class="image-option" onclick="selectOption(this, 'bread')">
                            <div class="image-placeholder">üçû</div>
                            <div>Bread</div>
                        </div>
                        <div class="image-option" onclick="selectOption(this, 'cheese')">
                            <div class="image-placeholder">üßÄ</div>
                            <div>Cheese</div>
                        </div>
                        <div class="image-option" onclick="selectOption(this, 'milk')">
                            <div class="image-placeholder">ü•õ</div>
                            <div>Milk</div>
                        </div>
                    </div>
                </div>

                <!-- Q10 -->
                <div class="question-container" data-question="10">
                    <div class="question">üìù –ó–∞–¥–∞–Ω–∏–µ 10: –°–æ—Å—Ç–∞–≤—å —Å–ª–æ–≤–æ CAT
                        <div class="question-subtitle">–ù–∞–∂–∏–º–∞–π –Ω–∞ –±—É–∫–≤—ã –ø–æ –ø–æ—Ä—è–¥–∫—É</div>
                    </div>
                    <div class="sentence-builder" id="wordBuilder10"></div>
                    <div class="word-bank">
                        <div class="word-tile" onclick="addToBuilder(this, 'C')">C</div>
                        <div class="word-tile" onclick="addToBuilder(this, 'A')">A</div>
                        <div class="word-tile" onclick="addToBuilder(this, 'T')">T</div>
                        <div class="word-tile" onclick="addToBuilder(this, 'D')">D</div>
                        <div class="word-tile" onclick="addToBuilder(this, 'O')">O</div>
                        <div class="word-tile" onclick="addToBuilder(this, 'G')">G</div>
                    </div>
                    <button style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 10px 20px; border-radius: 10px; margin: 5px;" onclick="clearBuilder()">üîÑ –û—á–∏—Å—Ç–∏—Ç—å</button>
                    <button style="background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%); color: white; padding: 10px 20px; border-radius: 10px; margin: 5px;" onclick="checkWord('CAT')">‚úì –ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                </div>

                <!-- Q11 -->
                <div class="question-container" data-question="11">
                    <div class="question">üèÉ –ó–∞–¥–∞–Ω–∏–µ 11: –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç "Jump"?</div>
                    <div class="options">
                        <div class="option" onclick="selectOption(this, '–ü—Ä—ã–≥–∞—Ç—å')">–ü—Ä—ã–≥–∞—Ç—å</div>
                        <div class="option" onclick="selectOption(this, '–ë–µ–∂–∞—Ç—å')">–ë–µ–∂–∞—Ç—å</div>
                        <div class="option" onclick="selectOption(this, '–°–∏–¥–µ—Ç—å')">–°–∏–¥–µ—Ç—å</div>
                        <div class="option" onclick="selectOption(this, '–°—Ç–æ—è—Ç—å')">–°—Ç–æ—è—Ç—å</div>
                    </div>
                </div>

                <!-- Q12 -->
                <div class="question-container" data-question="12">
                    <div class="question">üó£Ô∏è –ó–∞–¥–∞–Ω–∏–µ 12: –ì–æ–≤–æ—Ä–µ–Ω–∏–µ</div>
                    <div class="speaking-task">
                        <div class="speaking-prompt">üî¢ –ü–æ—Å—á–∏—Ç–∞–π –æ—Ç 1 –¥–æ 5 –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏</div>
                        <div style="color: #666; margin: 20px 0;">"One, Two, Three, Four, Five"</div>
                    </div>
                    <div class="teacher-buttons">
                        <button class="teacher-btn correct" onclick="teacherEvaluate(true)">‚úì –°–∫–∞–∑–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ</button>
                        <button class="teacher-btn incorrect" onclick="teacherEvaluate(false)">‚úó –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å</button>
                    </div>
                </div>

                <!-- Q13 -->
                <div class="question-container" data-question="13">
                    <div class="question">üìù –ó–∞–¥–∞–Ω–∏–µ 13: –ó–∞–∫–æ–Ω—á–∏ —Ñ—Ä–∞–∑—É: "I ___ a dog"</div>
                    <div class="options">
                        <div class="option" onclick="selectOption(this, 'have got')">have got</div>
                        <div class="option" onclick="selectOption(this, 'am')">am</div>
                        <div class="option" onclick="selectOption(this, 'can')">can</div>
                        <div class="option" onclick="selectOption(this, 'want')">want</div>
                    </div>
                </div>

                <!-- Q14 -->
                <div class="question-container" data-question="14">
                    <div class="question">üìñ –ó–∞–¥–∞–Ω–∏–µ 14: –ü—Ä–æ—á–∏—Ç–∞–π: "I like cats"
                        <div class="question-subtitle">–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç?</div>
                    </div>
                    <div class="options">
                        <div class="option" onclick="selectOption(this, '–ú–Ω–µ –Ω—Ä–∞–≤—è—Ç—Å—è –∫–æ—à–∫–∏')">–ú–Ω–µ –Ω—Ä–∞–≤—è—Ç—Å—è –∫–æ—à–∫–∏</div>
                        <div class="option" onclick="selectOption(this, '–£ –º–µ–Ω—è –µ—Å—Ç—å –∫–æ—à–∫–∞')">–£ –º–µ–Ω—è –µ—Å—Ç—å –∫–æ—à–∫–∞</div>
                        <div class="option" onclick="selectOption(this, '–Ø –≤–∏–∂—É –∫–æ—à–µ–∫')">–Ø –≤–∏–∂—É –∫–æ—à–µ–∫</div>
                        <div class="option" onclick="selectOption(this, '–Ø –∫–æ—à–∫–∞')">–Ø –∫–æ—à–∫–∞</div>
                    </div>
                </div>

                <!-- Q15 -->
                <div class="question-container" data-question="15">
                    <div class="question">üß© –ó–∞–¥–∞–Ω–∏–µ 15: –°–æ—Å—Ç–∞–≤—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ "I am happy"
                        <div class="question-subtitle">–ù–∞–∂–∏–º–∞–π –Ω–∞ —Å–ª–æ–≤–∞ –ø–æ –ø–æ—Ä—è–¥–∫—É</div>
                    </div>
                    <div class="sentence-builder" id="sentenceBuilder15"></div>
                    <div class="word-bank">
                        <div class="word-tile" onclick="addToSentence(this, 'I')">I</div>
                        <div class="word-tile" onclick="addToSentence(this, 'am')">am</div>
                        <div class="word-tile" onclick="addToSentence(this, 'happy')">happy</div>
                        <div class="word-tile" onclick="addToSentence(this, 'sad')">sad</div>
                        <div class="word-tile" onclick="addToSentence(this, 'is')">is</div>
                        <div class="word-tile" onclick="addToSentence(this, 'you')">you</div>
                    </div>
                    <button style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 10px 20px; border-radius: 10px; margin: 5px;" onclick="clearSentence()">üîÑ –û—á–∏—Å—Ç–∏—Ç—å</button>
                    <button style="background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%); color: white; padding: 10px 20px; border-radius: 10px; margin: 5px;" onclick="checkSentence('I am happy')">‚úì –ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                </div>

                <!-- Q16 -->
                <div class="question-container" data-question="16">
                    <div class="question">üê¶ –ó–∞–¥–∞–Ω–∏–µ 16: –í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                        <div class="question-subtitle">"A bird ___ fly"</div>
                    </div>
                    <div class="options">
                        <div class="option" onclick="selectOption(this, 'can')">can (–º–æ–∂–µ—Ç)</div>
                        <div class="option" onclick="selectOption(this, 'cannot')">cannot (–Ω–µ –º–æ–∂–µ—Ç)</div>
                        <div class="option" onclick="selectOption(this, 'is')">is (–µ—Å—Ç—å)</div>
                        <div class="option" onclick="selectOption(this, 'has')">has (–∏–º–µ–µ—Ç)</div>
                    </div>
                </div>

                <!-- Q17 -->
                <div class="question-container" data-question="17">
                    <div class="question">üó£Ô∏è –ó–∞–¥–∞–Ω–∏–µ 17: –ì–æ–≤–æ—Ä–µ–Ω–∏–µ</div>
                    <div class="speaking-task">
                        <div class="speaking-prompt">üëã –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Å—è –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏</div>
                        <div style="color: #666; margin: 20px 0;">
                            –°–∫–∞–∂–∏: "My name is [—Ç–≤–æ–µ –∏–º—è]" –∏ "I am [–≤–æ–∑—Ä–∞—Å—Ç] years old"
                        </div>
                    </div>
                    <div class="teacher-buttons">
                        <button class="teacher-btn correct" onclick="teacherEvaluate(true)">‚úì –û—Ç–ª–∏—á–Ω–æ!</button>
                        <button class="teacher-btn incorrect" onclick="teacherEvaluate(false)">‚úó –ù—É–∂–Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞</button>
                    </div>
                </div>

                <!-- Q18 -->
                <div class="question-container" data-question="18">
                    <div class="question">üìö –ó–∞–¥–∞–Ω–∏–µ 18: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ "cat"</div>
                    <div class="options">
                        <div class="option" onclick="selectOption(this, 'cats')">cats</div>
                        <div class="option" onclick="selectOption(this, 'cates')">cates</div>
                        <div class="option" onclick="selectOption(this, 'cat')">cat</div>
                        <div class="option" onclick="selectOption(this, 'caties')">caties</div>
                    </div>
                </div>

                <!-- Q19 -->
                <div class="question-container" data-question="19">
                    <div class="question">‚è∞ –ó–∞–¥–∞–Ω–∏–µ 19: –ß—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç –°–ï–ô–ß–ê–°?
                        <div class="question-subtitle">"He ___ (read) a book now"</div>
                    </div>
                    <div class="options">
                        <div class="option" onclick="selectOption(this, 'is reading')">is reading</div>
                        <div class="option" onclick="selectOption(this, 'reads')">reads</div>
                        <div class="option" onclick="selectOption(this, 'read')">read</div>
                        <div class="option" onclick="selectOption(this, 'reading')">reading</div>
                    </div>
                </div>

                <!-- Q20 -->
                <div class="question-container" data-question="20">
                    <div class="question">üó£Ô∏è –ó–∞–¥–∞–Ω–∏–µ 20: –§–∏–Ω–∞–ª—å–Ω–æ–µ –≥–æ–≤–æ—Ä–µ–Ω–∏–µ!</div>
                    <div class="speaking-task">
                        <div style="font-size: 6em; margin: 20px 0;">üêï</div>
                        <div class="speaking-prompt">–û–ø–∏—à–∏ —ç—Ç—É –∫–∞—Ä—Ç–∏–Ω–∫—É –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏</div>
                        <div style="color: #666; margin: 20px 0;">–ü–æ–ø—Ä–æ–±—É–π —Å–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π</div>
                    </div>
                    <div class="teacher-buttons">
                        <button class="teacher-btn correct" onclick="teacherEvaluate(true)">‚úì –ú–æ–ª–æ–¥–µ—Ü!</button>
                        <button class="teacher-btn incorrect" onclick="teacherEvaluate(false)">‚úó –°—Ç–∞—Ä–∞–ª—Å—è!</button>
                    </div>
                </div>

                <div class="button-container">
                    <button class="btn-next" id="nextBtn" onclick="nextQuestion()" disabled>–î–∞–ª–µ–µ ‚û°Ô∏è</button>
                </div>
            </div>

            <!-- Results -->
            <div class="result-container" id="resultContainer">
                <div class="trophy">üèÜ</div>
                <div class="result-title">–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –¢—ã –ø—Ä–æ—à–µ–ª –≤—Å–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è!</div>
                <div class="stars" id="starsEarned"></div>
                <div class="result-level" id="resultLevel"></div>
                <div class="result-description" id="resultDescription"></div>
                <button class="start-button" onclick="startQuest()">üó∫Ô∏è –ù–∞—á–∞—Ç—å –ú–∞–≥–∏—á–µ—Å–∫–æ–µ –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ!</button>
                <button class="start-button" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);" onclick="location.reload()">üîÑ –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –µ—â–µ —Ä–∞–∑</button>
            </div>
        </div>

        <!-- QUEST ADVENTURE -->
        <div id="questContent" class="quest-screen">
            <div class="content">
                <!-- Quest Part 1 -->
                <div class="quest-part active" id="quest1">
                    <div class="story-box">
                        <div class="character">üßô‚Äç‚ôÇÔ∏è</div>
                        <div class="story-text">
                            <strong style="font-size: 1.5em;">–ì–ª–∞–≤–∞ 1: –í—Å—Ç—Ä–µ—á–∞ —Å –≤–æ–ª—à–µ–±–Ω–∏–∫–æ–º</strong><br><br>
                            –ü–æ—Å–ª–µ —Ç–≤–æ–µ–π –ø–æ–±–µ–¥—ã –≤ –∏—Å–ø—ã—Ç–∞–Ω–∏—è—Ö, –ø–µ—Ä–µ–¥ —Ç–æ–±–æ–π –ø–æ—è–≤–∏–ª—Å—è —Å—Ç–∞—Ä—ã–π –º—É–¥—Ä—ã–π –≤–æ–ª—à–µ–±–Ω–∏–∫!<br><br>
                            <em>"–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é —Ç–µ–±—è, —é–Ω—ã–π –∏—Å–∫–∞—Ç–µ–ª—å –∑–Ω–∞–Ω–∏–π! –Ø - Wizard Word, —Ö—Ä–∞–Ω–∏—Ç–µ–ª—å –ú–∞–≥–∏—á–µ—Å–∫–æ–≥–æ –ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞ –ê–Ω–≥–ª–∏–π—Å–∫–∏—Ö –°–ª–æ–≤. –ù–∞—à–µ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ –≤ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏! –ó–ª–æ–π –¥—Ä–∞–∫–æ–Ω Grammar Guard —É–∫—Ä–∞–ª –º–∞–≥–∏—á–µ—Å–∫–∏–π –∫—Ä–∏—Å—Ç–∞–ª–ª, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –≤—Å–µ–º –¥–µ—Ç—è–º —É—á–∏—Ç—å –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –ª–µ–≥–∫–æ –∏ –≤–µ—Å–µ–ª–æ!"</em><br><br>
                            <strong>"–¢–æ–ª—å–∫–æ —Ç–æ—Ç, –∫—Ç–æ –ø—Ä–æ—à–µ–ª –∏—Å–ø—ã—Ç–∞–Ω–∏—è, –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å! –û—Ç–ø—Ä–∞–≤–∏—à—å—Å—è –ª–∏ —Ç—ã –≤ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ?"</strong>
                        </div>
                    </div>
                    <div class="choice-container">
                        <div class="choice-btn" onclick="questChoice(1, 'yes')">
                            <strong>‚úÖ "–î–∞! –Ø –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å!"</strong><br>
                            <small>–û—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ</small>
                        </div>
                        <div class="choice-btn" onclick="questChoice(1, 'yes')">
                            <strong>üåü "–ó–≤—É—á–∏—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å?"</strong><br>
                            <small>–£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ –º–∏—Å—Å–∏–∏</small>
                        </div>
                    </div>
                </div>

                <!-- Quest Part 2 -->
                <div class="quest-part" id="quest2">
                    <div class="story-box">
                        <div class="character">üó∫Ô∏è</div>
                        <div class="story-text">
                            <strong style="font-size: 1.5em;">–ì–ª–∞–≤–∞ 2: –õ–µ—Å –ó–∞–≥–∞–¥–æ—á–Ω—ã—Ö –ë—É–∫–≤</strong><br><br>
                            –í–æ–ª—à–µ–±–Ω–∏–∫ –¥–∞–ª —Ç–µ–±–µ –º–∞–≥–∏—á–µ—Å–∫—É—é –∫–∞—Ä—Ç—É –∏ –æ—Ç–ø—Ä–∞–≤–∏–ª –≤ –ø—É—Ç—å!<br><br>
                            –ü–µ—Ä–≤–æ–µ –∏—Å–ø—ã—Ç–∞–Ω–∏–µ - –õ–µ—Å –ó–∞–≥–∞–¥–æ—á–Ω—ã—Ö –ë—É–∫–≤. –ó–¥–µ—Å—å —Å–ø—Ä—è—Ç–∞–Ω—ã –≤–æ–ª—à–µ–±–Ω—ã–µ —Å–æ–∫—Ä–æ–≤–∏—â–∞, –Ω–æ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –∏–∑ –Ω–∏—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª—é—á –∫ —Å–ª–µ–¥—É—é—â–µ–π —á–∞—Å—Ç–∏ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è!
                        </div>
                    </div>
                    <div class="dialogue-box">
                        <div class="npc-name">ü¶â –ú—É–¥—Ä–∞—è –°–æ–≤–∞</div>
                        <div class="npc-text">
                            "Hoo-hoo! Welcome, traveler! –í—ã–±–µ—Ä–∏ —Å—É–Ω–¥—É–∫ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Å–ª–æ–≤–æ–º 'MAGIC' –∏ –ø–æ–ª—É—á–∏ –∫–ª—é—á!"
                        </div>
                    </div>
                    <div class="mini-game">
                        <h3 style="color: #667eea; margin-bottom: 20px;">üéÅ –ù–∞–π–¥–∏ —Å—É–Ω–¥—É–∫ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Å–ª–æ–≤–æ–º!</h3>
                        <div class="treasure-grid">
                            <div class="treasure-box" onclick="openTreasure(this, false)">
                                üéÅ<br><small style="font-size: 0.5em;">MAJIC</small>
                            </div>
                            <div class="treasure-box" onclick="openTreasure(this, true)">
                                üéÅ<br><small style="font-size: 0.5em;">MAGIC</small>
                            </div>
                            <div class="treasure-box" onclick="openTreasure(this, false)">
                                üéÅ<br><small style="font-size: 0.5em;">MAGIK</small>
                            </div>
                        </div>
                        <button class="btn-next" id="quest2Btn" onclick="nextQuest(3)" style="margin: 20px auto; display: none;">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ! ‚û°Ô∏è</button>
                    </div>
                </div>

                <!-- Quest Part 3 -->
                <div class="quest-part" id="quest3">
                    <div class="story-box">
                        <div class="character">üåà</div>
                        <div class="story-text">
                            <strong style="font-size: 1.5em;">–ì–ª–∞–≤–∞ 3: –†–∞–¥—É–∂–Ω—ã–π –ú–æ—Å—Ç</strong><br><br>
                            –û—Ç–ª–∏—á–Ω–æ! –¢—ã –Ω–∞—à–µ–ª –∫–ª—é—á –∏ –ø—Ä–æ—à–µ–ª —á–µ—Ä–µ–∑ –ª–µ—Å!<br><br>
                            –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥ —Ç–æ–±–æ–π –†–∞–¥—É–∂–Ω—ã–π –ú–æ—Å—Ç. –ß—Ç–æ–±—ã –ø—Ä–æ–π—Ç–∏ –ø–æ –Ω–µ–º—É, –Ω—É–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–∑–≤–∞—Ç—å —Ü–≤–µ—Ç–∞!
                        </div>
                    </div>
                    <div class="dialogue-box">
                        <div class="npc-name">üßö –§–µ—è –†–∞–¥—É–≥–∏</div>
                        <div class="npc-text">
                            "Hello! –ù–∞–∂–º–∏ –Ω–∞ —Ü–≤–µ—Ç–∞ –º–æ—Å—Ç–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ: RED ‚Üí BLUE ‚Üí GREEN"
                        </div>
                    </div>
                    <div class="mini-game">
                        <h3 style="color: #667eea; margin-bottom: 20px;">üåà –ü—Ä–æ–π–¥–∏ –ø–æ –º–æ—Å—Ç—É!</h3>
                        <div style="text-align: center; margin: 20px 0;">
                            <div style="font-size: 1.2em; margin: 10px 0;">–ù–∞–∂–º–∏ —Ü–≤–µ—Ç–∞ –ø–æ –ø–æ—Ä—è–¥–∫—É:</div>
                            <div id="colorSequence" style="font-size: 1.5em; font-weight: bold; color: #667eea; margin: 10px 0;"></div>
                        </div>
                        <div class="puzzle-grid">
                            <div class="puzzle-piece" style="background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);" onclick="pressColor(this, 'RED')">RED</div>
                            <div class="puzzle-piece" style="background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);" onclick="pressColor(this, 'GREEN')">GREEN</div>
                            <div class="puzzle-piece" style="background: linear-gradient(135deg, #45b7d1 0%, #4a90e2 100%);" onclick="pressColor(this, 'BLUE')">BLUE</div>
                            <div class="puzzle-piece" style="background: linear-gradient(135deg, #f9ca24 0%, #f0932b 100%);" onclick="pressColor(this, 'YELLOW')">YELLOW</div>
                        </div>
                        <button class="btn-next" id="quest3Btn" onclick="nextQuest(4)" style="margin: 20px auto; display: none;">–í –∑–∞–º–æ–∫ –¥—Ä–∞–∫–æ–Ω–∞! ‚û°Ô∏è</button>
                    </div>
                </div>

                <!-- Quest Part 4 -->
                <div class="quest-part" id="quest4">
                    <div class="story-box">
                        <div class="character">üè∞</div>
                        <div class="story-text">
                            <strong style="font-size: 1.5em;">–ì–ª–∞–≤–∞ 4: –ó–∞–º–æ–∫ –î—Ä–∞–∫–æ–Ω–∞</strong><br><br>
                            –¢—ã –ø–µ—Ä–µ—Å–µ–∫ –†–∞–¥—É–∂–Ω—ã–π –ú–æ—Å—Ç –∏ –¥–æ–±—Ä–∞–ª—Å—è –¥–æ –∑–∞–º–∫–∞!<br><br>
                            –ü–µ—Ä–µ–¥ —Ç–æ–±–æ–π –ø–æ—è–≤–∏–ª—Å—è Grammar Guard - –Ω–µ –∑–ª–æ–π, –∞ –ø—Ä–æ—Å—Ç–æ –æ—á–µ–Ω—å –æ–¥–∏–Ω–æ–∫–∏–π –¥—Ä–∞–∫–æ–Ω, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ç–µ–ª –≤–Ω–∏–º–∞–Ω–∏—è...
                        </div>
                    </div>
                    <div class="character" style="font-size: 8em;">üêâ</div>
                    <div class="dialogue-box">
                        <div class="npc-name">üêâ Grammar Guard</div>
                        <div class="npc-text">
                            "ROAR! –ù–∞–∫–æ–Ω–µ—Ü-—Ç–æ –∫—Ç–æ-—Ç–æ –¥–æ–±—Ä–∞–ª—Å—è –¥–æ –º–æ–µ–≥–æ –∑–∞–º–∫–∞! –Ø –Ω–µ —Ö–æ—Ç–µ–ª –Ω–∏–∫–æ–≥–æ –æ–±–∏–∂–∞—Ç—å... –ü—Ä–æ—Å—Ç–æ –º–Ω–µ —Å–∫—É—á–Ω–æ –æ–¥–Ω–æ–º—É. –ó–Ω–∞–µ—à—å —á—Ç–æ? –î–∞–≤–∞–π —Å—ã–≥—Ä–∞–µ–º –≤ –º–æ—é –ª—é–±–∏–º—É—é –∏–≥—Ä—É! –ï—Å–ª–∏ –≤—ã–∏–≥—Ä–∞–µ—à—å - –≤–µ—Ä–Ω—É –∫—Ä–∏—Å—Ç–∞–ª–ª!"
                        </div>
                    </div>
                    <div class="mini-game">
                        <h3 style="color: #667eea; margin-bottom: 20px;">üéÆ –ò–≥—Ä–∞ –¥—Ä–∞–∫–æ–Ω–∞: –ù–∞–π–¥–∏ –ø–∞—Ä—ã —Å–ª–æ–≤!</h3>
                        <div style="text-align: center; margin: 20px 0;">
                            <div style="font-size: 1.2em;">–ù–∞–π–¥–µ–Ω–æ –ø–∞—Ä: <span id="pairsFound">0</span>/3</div>
                        </div>
                        <div class="puzzle-grid" style="grid-template-columns: repeat(3, 150px);">
                            <div class="puzzle-piece" onclick="matchWord(this, 'CAT')">CAT üê±</div>
                            <div class="puzzle-piece" onclick="matchWord(this, 'DOG')">DOG üêï</div>
                            <div class="puzzle-piece" onclick="matchWord(this, 'BIRD')">BIRD üê¶</div>
                            <div class="puzzle-piece" onclick="matchWord(this, 'CAT')">üê± CAT</div>
                            <div class="puzzle-piece" onclick="matchWord(this, 'BIRD')">üê¶ BIRD</div>
                            <div class="puzzle-piece" onclick="matchWord(this, 'DOG')">üêï DOG</div>
                        </div>
                        <button class="btn-next" id="quest4Btn" onclick="nextQuest(5)" style="margin: 20px auto; display: none;">–§–∏–Ω–∞–ª –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è! ‚û°Ô∏è</button>
                    </div>
                </div>

                <!-- Quest Part 5 -->
                <div class="quest-part" id="quest5">
                    <div class="story-box" style="background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);">
                        <div style="text-align: center;">
                            <div class="character" style="font-size: 10em; animation: bounce 2s infinite;">üíé</div>
                        </div>
                        <div class="story-text">
                            <strong style="font-size: 2em;">üéâ –ü–û–ë–ï–î–ê! üéâ</strong><br><br>
                            –¢—ã –≤—ã–∏–≥—Ä–∞–ª –∏–≥—Ä—É –¥—Ä–∞–∫–æ–Ω–∞! Grammar Guard —Ç–∞–∫ –æ–±—Ä–∞–¥–æ–≤–∞–ª—Å—è –Ω–æ–≤–æ–º—É –¥—Ä—É–≥—É, —á—Ç–æ —Å —Ä–∞–¥–æ—Å—Ç—å—é –≤–µ—Ä–Ω—É–ª –º–∞–≥–∏—á–µ—Å–∫–∏–π –∫—Ä–∏—Å—Ç–∞–ª–ª!<br><br>
                            <em>"–°–ø–∞—Å–∏–±–æ —Ç–µ–±–µ, —é–Ω—ã–π –≥–µ—Ä–æ–π! –¢–µ–ø–µ—Ä—å —è –ø–æ–Ω—è–ª - —É—á–∏—Ç—å –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –≥–æ—Ä–∞–∑–¥–æ –≤–µ—Å–µ–ª–µ–µ –≤–º–µ—Å—Ç–µ —Å –¥—Ä—É–∑—å—è–º–∏! –ü—Ä–∏—Ö–æ–¥–∏ –µ—â–µ, –±—É–¥–µ–º –∏–≥—Ä–∞—Ç—å –≤–º–µ—Å—Ç–µ!"</em>
                        </div>
                    </div>
                    <div class="dialogue-box">
                        <div class="npc-name">üßô‚Äç‚ôÇÔ∏è Wizard Word</div>
                        <div class="npc-text">
                            "–ù–µ–≤–µ—Ä–æ—è—Ç–Ω–æ! –¢—ã –Ω–µ —Ç–æ–ª—å–∫–æ –≤–µ—Ä–Ω—É–ª –∫—Ä–∏—Å—Ç–∞–ª–ª, –Ω–æ –∏ –Ω–∞—à–µ–ª –Ω–æ–≤–æ–≥–æ –¥—Ä—É–≥–∞ –¥–ª—è Grammar Guard! –¢—ã –Ω–∞—Å—Ç–æ—è—â–∏–π –≥–µ—Ä–æ–π! –í–æ—Ç —Ç–≤–æ–∏ –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ!"
                        </div>
                    </div>
                    <div class="reward-notification">
                        üèÜ –ü–û–õ–£–ß–ï–ù–´ –ù–ê–ì–†–ê–î–´! üèÜ<br>
                        ‚≠ê‚≠ê‚≠ê +3 –ó–≤–µ–∑–¥—ã –ì–µ—Ä–æ—è<br>
                        üéñÔ∏è –ó–Ω–∞—á–æ–∫ "–•—Ä–∞–±—Ä—ã–π –ü—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫"<br>
                        üìú –î–∏–ø–ª–æ–º "–î—Ä—É–≥ –î—Ä–∞–∫–æ–Ω–∞"
                    </div>
                    <div class="inventory">
                        <div class="inventory-item" title="–ú–∞–≥–∏—á–µ—Å–∫–∏–π –ö—Ä–∏—Å—Ç–∞–ª–ª">üíé</div>
                        <div class="inventory-item" title="–ö–ª—é—á –∏–∑ –õ–µ—Å–∞">üîë</div>
                        <div class="inventory-item" title="–†–∞–¥—É–∂–Ω–æ–µ –ü–µ—Ä–æ">ü™∂</div>
                        <div class="inventory-item" title="–î—Ä—É–∂–±–∞ –î—Ä–∞–∫–æ–Ω–∞">üêâ</div>
                    </div>
                    <div style="margin: 30px 0; text-align: center;">
                        <button class="start-button" onclick="location.reload()">üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ</button>
                        <button class="start-button" style="background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%);" onclick="alert('–°–ª–µ–¥—É—é—â–∏–µ —É—Ä–æ–≤–Ω–∏ —Å–∫–æ—Ä–æ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã! üéÆ')">üìö –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Audio Context
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        let soundEnabled = true;
        let musicEnabled = false;
        let musicOscillators = [];

        function playSound(type) {
            if (!soundEnabled) return;
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            switch(type) {
                case 'correct':
                    oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
                    oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);
                    oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.3);
                    break;
                case 'incorrect':
                    oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                    oscillator.frequency.setValueAtTime(150, audioContext.currentTime + 0.1);
                    gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.15);
                    break;
                case 'star':
                    oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                    oscillator.frequency.setValueAtTime(1200, audioContext.currentTime + 0.05);
                    gainNode.gain.setValueAtTime(0.25, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.2);
                    break;
                case 'levelComplete':
                    const frequencies = [523.25, 659.25, 783.99, 1046.50];
                    frequencies.forEach((freq, index) => {
                        const osc = audioContext.createOscillator();
                        const gain = audioContext.createGain();
                        osc.connect(gain);
                        gain.connect(audioContext.destination);
                        osc.frequency.value = freq;
                        gain.gain.setValueAtTime(0.2, audioContext.currentTime + index * 0.15);
                        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + index * 0.15 + 0.3);
                        osc.start(audioContext.currentTime + index * 0.15);
                        osc.stop(audioContext.currentTime + index * 0.15 + 0.3);
                    });
                    break;
                case 'click':
                    oscillator.frequency.value = 1000;
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.05);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.05);
                    break;
                case 'match':
                    oscillator.frequency.setValueAtTime(600, audioContext.currentTime);
                    oscillator.frequency.setValueAtTime(900, audioContext.currentTime + 0.1);
                    gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.2);
                    break;
            }
        }

        // Background Music
        function startMusic() {
            stopMusic();
            const melody = [
                {note: 261.63, duration: 0.4}, // C4
                {note: 293.66, duration: 0.4}, // D4
                {note: 329.63, duration: 0.3}, // E4
                {note: 293.66, duration: 0.3}, // D4
                {note: 261.63, duration: 0.5}, // C4
                {note: 220.00, duration: 0.4}, // A3
                {note: 246.94, duration: 0.4}, // B3
                {note: 261.63, duration: 0.6}  // C4
            ];

            let time = audioContext.currentTime;

            function playMelodyLoop() {
                if (!musicEnabled) return;

                melody.forEach((note, index) => {
                    const osc = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    osc.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    osc.type = 'sine';
                    osc.frequency.value = note.note;
                    gainNode.gain.setValueAtTime(0, time);
                    gainNode.gain.linearRampToValueAtTime(0.08, time + 0.05);
                    gainNode.gain.linearRampToValueAtTime(0, time + note.duration);
                    osc.start(time);
                    osc.stop(time + note.duration);
                    musicOscillators.push(osc);
                    time += note.duration;
                });

                if (musicEnabled) {
                    setTimeout(() => {
                        time = audioContext.currentTime;
                        playMelodyLoop();
                    }, melody.reduce((sum, note) => sum + note.duration, 0) * 1000);
                }
            }
            playMelodyLoop();
        }

        function stopMusic() {
            musicOscillators.forEach(osc => {
                try { osc.stop(); } catch(e) {}
            });
            musicOscillators = [];
        }

        function toggleSound() {
            soundEnabled = !soundEnabled;
            const toggle = document.getElementById('soundToggle');
            if (soundEnabled) {
                toggle.textContent = 'üîä';
                toggle.classList.remove('muted');
                playSound('click');
            } else {
                toggle.textContent = 'üîá';
                toggle.classList.add('muted');
            }
        }

        function toggleMusic() {
            musicEnabled = !musicEnabled;
            const toggle = document.getElementById('musicToggle');
            if (musicEnabled) {
                toggle.textContent = 'üéµ';
                toggle.classList.remove('muted');
                startMusic();
            } else {
                toggle.textContent = 'üîá';
                toggle.classList.add('muted');
                stopMusic();
            }
        }

        // Game Logic
        let currentQuestion = 1;
        let answers = {};
        let score = 0;
        let totalStars = 0;

        const correctAnswers = {
            1: 'C', 2: 'red', 3: 'FIVE', 5: 'cat', 7: 'FIVE', 8: '–ú–∞–º–∞', 
            9: 'apple', 11: '–ü—Ä—ã–≥–∞—Ç—å', 13: 'have got', 14: '–ú–Ω–µ –Ω—Ä–∞–≤—è—Ç—Å—è –∫–æ—à–∫–∏',
            16: 'can', 18: 'cats', 19: 'is reading'
        };

        function startTest() {
            playSound('click');
            document.getElementById('introScreen').style.display = 'none';
            document.getElementById('testContent').style.display = 'block';
            updateProgress();
        }

        function selectOption(element, answer) {
            playSound('click');
            const container = element.closest('.question-container');
            const options = container.querySelectorAll('.option, .image-option');
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            answers[currentQuestion] = answer;
            document.getElementById('nextBtn').disabled = false;
        }

        function teacherEvaluate(isCorrect) {
            playSound(isCorrect ? 'correct' : 'incorrect');
            answers[currentQuestion] = isCorrect ? 'correct' : 'incorrect';
            if (isCorrect) {
                score++;
                totalStars++;
            }
            document.getElementById('nextBtn').disabled = false;
        }

        function nextQuestion() {
            if (!answers[currentQuestion]) return;

            if (correctAnswers[currentQuestion] && answers[currentQuestion] === correctAnswers[currentQuestion]) {
                score++;
                totalStars++;
                playSound('star');
            } else if (answers[currentQuestion] === 'correct') {
                playSound('star');
            }

            playSound('click');

            const currentContainer = document.querySelector('[data-question="' + currentQuestion + '"]');
            currentContainer.classList.remove('active');

            currentQuestion++;

            if (currentQuestion <= 20) {
                const nextContainer = document.querySelector('[data-question="' + currentQuestion + '"]');
                nextContainer.classList.add('active');
                document.getElementById('nextBtn').disabled = true;
                updateProgress();
            } else {
                playSound('levelComplete');
                showResults();
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion - 1) / 20) * 100;
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = progress + '%';
            progressBar.textContent = (currentQuestion - 1) + '/20';
            document.getElementById('starsDisplay').textContent = '‚≠ê ' + totalStars + '/20';
            document.getElementById('currentLevelBadge').textContent = 'üìç Level 0: ' + (currentQuestion - 1) + '/20';
        }

        function showResults() {
            document.querySelector('.content').style.display = 'none';
            document.getElementById('resultContainer').classList.add('active');

            let starsText = '';
            for(let i = 0; i < totalStars; i++) starsText += '‚≠ê';

            document.getElementById('starsEarned').textContent = starsText + ' (' + totalStars + '/20)';

            if (totalStars >= 15) {
                document.getElementById('resultLevel').textContent = 'üåü –û—Ç–ª–∏—á–Ω–æ! –í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å!';
                document.getElementById('resultDescription').textContent = '–¢—ã –ø–æ–∫–∞–∑–∞–ª –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ!';
            } else if (totalStars >= 10) {
                document.getElementById('resultLevel').textContent = 'üëç –•–æ—Ä–æ—à–æ! –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å!';
                document.getElementById('resultDescription').textContent = '–£ —Ç–µ–±—è –Ω–µ–ø–ª–æ—Ö–∏–µ –∑–Ω–∞–Ω–∏—è, –ø—Ä–æ–¥–æ–ª–∂–∞–π —É—á–∏—Ç—å—Å—è!';
            } else {
                document.getElementById('resultLevel').textContent = 'üå± –ù–∞—á–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å!';
                document.getElementById('resultDescription').textContent = '–û—Ç–ª–∏—á–Ω–æ–µ –Ω–∞—á–∞–ª–æ! –ë—É–¥–µ–º —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ!';
            }

            document.getElementById('currentLevelBadge').textContent = 'üèÜ Level 0 Complete!';
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = '100%';
            progressBar.textContent = '20/20 ‚úì';
        }

        // Matching Game
        let firstMatch = null;
        let matchedPairs = 0;

        function selectMatch(element, value) {
            if (element.classList.contains('matched')) return;
            playSound('click');

            if (!firstMatch) {
                firstMatch = {element: element, value: value};
                element.classList.add('selected');
            } else {
                if (firstMatch.value === value && firstMatch.element !== element) {
                    playSound('match');
                    firstMatch.element.classList.remove('selected');
                    firstMatch.element.classList.add('matched');
                    element.classList.add('matched');
                    matchedPairs++;

                    if (matchedPairs === 3) {
                        setTimeout(() => {
                            playSound('correct');
                            answers[currentQuestion] = 'correct';
                            score++;
                            totalStars++;
                            document.getElementById('nextBtn').disabled = false;
                        }, 500);
                    }
                } else {
                    playSound('incorrect');
                    firstMatch.element.classList.remove('selected');
                }
                firstMatch = null;
            }
        }

        // Word Builder
        let builtWord = [];
        function addToBuilder(element, letter) {
            if (element.classList.contains('used')) return;
            playSound('click');
            element.classList.add('used');
            builtWord.push(letter);
            document.getElementById('wordBuilder10').innerHTML += '<div class="word-tile" style="cursor: default;">' + letter + '</div>';
        }

        function clearBuilder() {
            playSound('click');
            builtWord = [];
            document.getElementById('wordBuilder10').innerHTML = '';
            document.querySelectorAll('[data-question="10"] .word-tile').forEach(tile => tile.classList.remove('used'));
        }

        function checkWord(correct) {
            const userWord = builtWord.join('');
            if (userWord === correct) {
                playSound('correct');
                alert('‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü!');
                answers[currentQuestion] = 'correct';
                score++;
                totalStars++;
                document.getElementById('nextBtn').disabled = false;
            } else {
                playSound('incorrect');
                alert('‚ùå –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑! –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–ª–æ–≤–æ: ' + correct);
                clearBuilder();
            }
        }

        // Sentence Builder
        let builtSentence = [];
        function addToSentence(element, word) {
            if (element.classList.contains('used')) return;
            playSound('click');
            element.classList.add('used');
            builtSentence.push(word);
            document.getElementById('sentenceBuilder15').innerHTML += '<div class="word-tile" style="cursor: default;">' + word + '</div>';
        }

        function clearSentence() {
            playSound('click');
            builtSentence = [];
            document.getElementById('sentenceBuilder15').innerHTML = '';
            document.querySelectorAll('[data-question="15"] .word-tile').forEach(tile => tile.classList.remove('used'));
        }

        function checkSentence(correct) {
            const userSentence = builtSentence.join(' ');
            if (userSentence === correct) {
                playSound('correct');
                alert('‚úÖ –û—Ç–ª–∏—á–Ω–æ! –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ!');
                answers[currentQuestion] = 'correct';
                score++;
                totalStars++;
                document.getElementById('nextBtn').disabled = false;
            } else {
                playSound('incorrect');
                alert('‚ùå –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑! –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫: ' + correct);
                clearSentence();
            }
        }

        // QUEST SYSTEM
        function startQuest() {
            playSound('levelComplete');
            document.getElementById('testContent').style.display = 'none';
            document.getElementById('questContent').classList.add('active');
            document.getElementById('currentLevelBadge').textContent = 'üó∫Ô∏è Adventure Quest';
            document.getElementById('musicToggle').style.display = 'flex';
            if (!musicEnabled) toggleMusic();
        }

        function questChoice(questNum, choice) {
            playSound('click');
            nextQuest(questNum + 1);
        }

        function nextQuest(questNum) {
            playSound('click');
            document.querySelectorAll('.quest-part').forEach(part => part.classList.remove('active'));
            document.getElementById('quest' + questNum).classList.add('active');
        }

        // Treasure Hunt
        let treasureFound = false;
        function openTreasure(element, isCorrect) {
            if (element.classList.contains('opened')) return;
            playSound('click');
            element.classList.add('opened');

            if (isCorrect) {
                element.innerHTML = 'üîë<br><small style="font-size: 0.5em;">–ö–ª—é—á!</small>';
                playSound('correct');
                treasureFound = true;
                document.getElementById('quest2Btn').style.display = 'block';
                setTimeout(() => playSound('star'), 300);
            } else {
                element.innerHTML = '‚ùå<br><small style="font-size: 0.5em;">–ü—É—Å—Ç–æ</small>';
                playSound('incorrect');
            }
        }

        // Color Bridge
        let colorSequence = [];
        let correctSequence = ['RED', 'BLUE', 'GREEN'];
        function pressColor(element, color) {
            playSound('click');
            colorSequence.push(color);
            document.getElementById('colorSequence').textContent = colorSequence.join(' ‚Üí ');

            if (colorSequence.length === correctSequence.length) {
                if (JSON.stringify(colorSequence) === JSON.stringify(correctSequence)) {
                    playSound('correct');
                    element.classList.add('correct');
                    setTimeout(() => {
                        alert('‚úÖ –û—Ç–ª–∏—á–Ω–æ! –¢—ã –ø—Ä–æ—à–µ–ª –ø–æ –º–æ—Å—Ç—É!');
                        document.getElementById('quest3Btn').style.display = 'block';
                        playSound('star');
                    }, 500);
                } else {
                    playSound('incorrect');
                    alert('‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å! –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑!');
                    colorSequence = [];
                    document.getElementById('colorSequence').textContent = '';
                }
            }
        }

        // Dragon Match Game
        let firstCard = null;
        let matchesFound = 0;
        function matchWord(element, word) {
            if (element.classList.contains('correct')) return;
            playSound('click');

            if (!firstCard) {
                firstCard = {element: element, word: word};
                element.style.border = '3px solid #FFD700';
            } else {
                if (firstCard.word === word && firstCard.element !== element) {
                    playSound('correct');
                    firstCard.element.classList.add('correct');
                    element.classList.add('correct');
                    matchesFound++;
                    document.getElementById('pairsFound').textContent = matchesFound;

                    if (matchesFound === 3) {
                        setTimeout(() => {
                            playSound('levelComplete');
                            alert('üéâ –¢—ã –Ω–∞—à–µ–ª –≤—Å–µ –ø–∞—Ä—ã! –î—Ä–∞–∫–æ–Ω –≤ –≤–æ—Å—Ç–æ—Ä–≥–µ!');
                            document.getElementById('quest4Btn').style.display = 'block';
                        }, 500);
                    } else {
                        playSound('star');
                    }
                } else {
                    playSound('incorrect');
                    firstCard.element.style.border = '3px solid transparent';
                }
                firstCard = null;
            }
        }
    </script>
</body>
</html>